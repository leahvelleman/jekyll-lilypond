# jekyll-lilypond


Render snippets of lilypond code by placing them within the `{% lilypond %}...{% endlilypond %}` block. 

For example, use this code to render a scale with alt-text for accessibility.

```
Here is some music.

{% lilypond alt:'A C-Major scale' %} c d e f g a b c {% endlilypond %}
```

TODO: The plugin generates a SVG image and includes it in the output page.

## Installation

The plugin requires TK what version of Lilypond TK what version of timidity. 

## Usage

By default, the tag recognizes these attributes:

* `alt` — TODO: The alt text for the image, defaulting to "A piece of musical notation" if not specified
* `class` — TODO: The class attribute for the image tag, defaulting to "jekyll-lilypond"
* `style` — TODO: The style attribute for the image tag, defaulting to empty
* `mp3` — TODO: Whether to generate an mp3, defaulting to `false`
* `tempo` — TODO: Tempo of generated mp3, where a value of `120` means ♩=120
* `lyricfont` — TODO: The font to use for typesetting lyrics, defaulting to Lilypond's Century Schoolbook-like default
* `lyricsize` — TODO: The font size of lyrics, in Lilypond's idiosyncratic units: `2` is large, `1` is normal, `0` small, `-1` very small, and so on.

It may be useful to choose a narrow lyric font, so that wordy passages don't have their spacing distorted. Times is fairly narrow, and the free font Brill and 
the nonfree Minion Pro Condensed are both attractive options that are narrower still.

### New defaults

### Syntax

The block expects its contents to be lilypond code, and it compiles that code to produce an image, which it inserts into the rendered page.

These tag attributes are inserted into rendered page:
TODO: class, style, alt, what else?

TODO: `{% lilypond alt:'A C-Major scale' %} c d e f g a b c {% endlilypond %}`

TODO autogenerated filename

### Output

TODO 

### Templates

You can provide an _output template_ for the tag's appearance on the rendered page. You could use this, for instance, to TODO. 
This template can use any tag attributes, not just the official ones. If your template includes `{{ foo }}`, you can provide 
a value by calling `{% lilypond template: mytemplate foo: bar %}` and it will render to `bar` in the final page. Output templates 
must have a filename ending in `.html`.

You can also provide an _input template_ for the lilypond input, ETC ETC. Input templates must have a filename ending in `.ly`, and must
render to valid lilypond code. 

Input and output templates can access the same attributes. For instance, to make the alt text of an image reflect the key it
is in, you could have a `key` attribute that's used like this in an input template

```
\key {{ key }} major {{ content }}
```

and like this in an output template.

```
<img src="{{ filename }}.svg" alt="A piece of music in {{ key }} major">
```

#### Template limitations

TODO handling of `content` and `filename`

## Testing

`bundle exec rspec` runs tests. A minimal sample Jekyll site for tests to call on is in `spec/fixtures`, 
with the interesting details being the sample templates in `spec/fixtures/layouts`.
